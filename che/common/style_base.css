/* common/style_base.css â€” theme + watermark (print) + print rules */
html,body{background:#f6f8fb;color:#0f172a}
body{
  margin:0;
  line-height:1.8;
  font-family:"Hiragino Kaku Gothic ProN","Noto Sans JP","Noto Sans CJK JP",
    system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif
}
header.site{
  position:sticky;
  top:0;
  z-index:10;
  background:#fff;
  border-bottom:1px solid #e2e8f0;
  box-shadow:0 2px 10px rgba(15,23,42,.04);
  padding:10px 24px;
  display:flex;
  align-items:center;
  justify-content:space-between
}
.btn{
  appearance:none;
  border:1px solid #e2e8f0;
  background:#fff;
  color:#0f172a;
  padding:8px 12px;
  border-radius:10px;
  cursor:pointer;
  font-weight:600
}
.btn-primary{background:#2563eb;color:#fff;border:none}

.teacher-only{display:none}
.student-only{display:block}

/* âŒ åŸæ¥çš„ï¼šå±å¹• + æ‰“å°éƒ½åŠ æ°´å°ï¼ˆå·²åˆ é™¤ï¼‰
body.student::before{ ... }
*/

/* âœ… æ–°ç‰ˆï¼šåªåœ¨â€œæ‰“å°æ—¶â€åŠ æ°´å°ï¼ˆå­¦ç”Ÿ / æ•™å¸ˆè§†å›¾éƒ½è¦†ç›–ï¼‰ */
@media print{

  /* æ‰“å°æ ·å¼åŸºç¡€è®¾ç½® */
  header.site{display:none!important}
  .teacher-only{display:none!important}
  body{background:#fff}
  .page-break-before{break-before:page;page-break-before:always}
  .page-break-after{break-after:page;page-break-after:always}
  .keep-together{break-inside:avoid;page-break-inside:avoid}
  h1,h2,h3{break-after:avoid-page}
  table,figure,img{break-inside:avoid;page-break-inside:avoid}

  /* æ‰“å°æ—¶éšè—å³ä¸Šè§’å…¨å±€å¯¼èˆªæŒ‰é’® */
  #global-nav-buttons{
    display:none!important;
  }

  /* ğŸ”’ é»˜è®¤ï¼ˆå­¦ç”Ÿè§†å›¾ï¼‰ï¼šå¤§å·å¼ºæ°´å° */
  body:not(.teacher-mode)::before{
    content:"ç„¡æ–­è»¢è¼‰ç¦æ­¢\\A - WANG --";
    white-space:pre;
    position:fixed;
    top:45%;
    left:50%;
    transform:translate(-50%,-50%) rotate(-30deg);
    font-size:96px;
    font-weight:900;
    letter-spacing:8px;
    color:rgba(0,0,0,0.06);
    pointer-events:none;
    z-index:9999;
  }

  /* ğŸ‘©â€ğŸ« æ•™å¸«ç”¨ï¼šå¯ä»¥ç¨å¾®æ·¡ä¸€ç‚¹ / æ¢æ–‡æ¡ˆ */
  body.teacher-mode::before{
    content:"å­¦ç¿’å°å±‹ æ•™å¸«ç”¨æ§ãˆ";
    white-space:pre;
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%) rotate(-30deg);
    font-size:72px;
    font-weight:800;
    letter-spacing:4px;
    color:rgba(0,0,0,0.04);
    pointer-events:none;
    z-index:9999;
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ğŸ”’ å­¦ç”Ÿæ¨¡å¼ä¸‹ï¼šç¦æ­¢å¤åˆ¶ã€é€‰ä¸­ã€å³é”®
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
body:not(.teacher-mode) {
  -webkit-user-select: none;  /* ç¦æ­¢æ–‡å­—é€‰æ‹©ï¼ˆChrome / Safariï¼‰*/
  -moz-user-select: none;     /* ç¦æ­¢æ–‡å­—é€‰æ‹©ï¼ˆFirefoxï¼‰*/
  -ms-user-select: none;      /* ç¦æ­¢æ–‡å­—é€‰æ‹©ï¼ˆIE10+ï¼‰*/
  user-select: none;          /* ç¦æ­¢æ–‡å­—é€‰æ‹©ï¼ˆæ ‡å‡†ï¼‰*/
  pointer-events: auto;
}

/* ç¦æ­¢å›¾ç‰‡æ‹–æ‹½ä¸å³é”® */
body:not(.teacher-mode) img {
  -webkit-user-drag: none;
  pointer-events: none;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ğŸ‘©â€ğŸ« æ•™å¸ˆæ¨¡å¼ä¸‹ï¼šæ¢å¤æ­£å¸¸é€‰æ‹©ä¸å¤åˆ¶
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
body.teacher-mode {
  -webkit-user-select: text;
  user-select: text;
  pointer-events: auto;
}

/* =====================================
   å…¨å±€å¯¼èˆªæŒ‰é’®ï¼ˆè¿”å›ä¸Šä¸€é¡µ / å›ä¸»é¡µé¢ï¼‰
===================================== */
#global-nav-buttons {
  position: fixed;
  top: 20px;
  right: 20px;
  display: flex;
  gap: 10px;
  z-index: 99999;
}

.nav-btn {
  padding: 6px 12px;
  font-size: 14px;
  background: #2563eb;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
}

.nav-btn:hover {
  background: #1e3ea8;
}

/* === DEBUG: å¼ºåˆ¶æ‰“å°æ°´å°ï¼ˆæœ€ä½æ¡ä»¶ç‰ˆæœ¬ï¼‰ === */
@media print {
  body::before {
    content: "TEST WATERMARK - WANG -";
    white-space: pre;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-30deg);
    font-size: 80px;
    font-weight: 900;
    color: rgba(0,0,0,0.12);
    z-index: 999999;
    pointer-events: none;
  }
}
